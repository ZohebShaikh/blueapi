authentication:
  providers:
    - provider: keycloak_oidc
      authenticator: tiled.authenticators:ProxiedOIDCAuthenticator
      args:
        audience: tiled_aud
        client_id: tiled
        device_flow_client_id: tiled-cli
        well_known_uri: "http://localhost:8090/realms/master/.well-known/openid-configuration"
        scopes:
          - openid
          - email
          - profile
        confirmation_message: "You have logged in with Proxied OIDC as {id}."

access_control:
  access_policy: "tiled.access_control.access_policies:ExternalPolicyDecisionPoint"
  args:
    authorization_provider: http://localhost:8181/v1/data/rbac/
    audience: tiled_aud
    node_access: "allow"
    filter_nodes: "tags"
    scopes_access: "scopes"

trees:
  - path: /
    tree: catalog
    args:
      uri: "sqlite:////storage/catalog.db"
      writable_storage: "sqlite:////storage/catalog.db"
      init_if_not_exists: true
      top_level_access_blob: { "tags": ["public"] }
